{% extends "recipeBase.html" %}

{% block content %}
  <h5 style="text-align: center">
    <a href="{{note.recipe.url}}">
      {{note.recipe.title}}
    </a>
    {% if not edit %}
      <a class="recipe-original-link" href="{% url 'editNoteHtml' note.id %}">
        (Edit)
      </a>
    {% endif %}
    <a class="recipe-original-link" href="{% url 'deleteNoteHtml' note.id %}">
      (Delete)
    </a>
  </h5>
  {% if edit %}
    <form class="centered small" action="{% url 'editNote' note.id %}" method="post">
      <label class="recipe-form">
        Ingredients:
        <textarea class="materialize-textarea" name="ingredients">{{note.recipe.ingredients}}</textarea>
      </label>
      <br>
      <label class="recipe-form">
        Instructions:
        <textarea class="materialize-textarea" name="instructions">{{note.recipe.instructions}}</textarea>
      </label>
      <br>
      <label class="recipe-form">
        Image url:
        <input type="text" name="image" value="{{note.recipe.image}}"></input>
      </label>
      <br>
      <label class="recipe-form">
        Rating:<br>
        <fieldset class="rating">
          {% for i in rates %}
            {% if note.rating == i %}
              <input checked type="radio" id="star{{i}}" name="rating" value="{{i}}"><label class="full" for="star{{i}}" title=""></label>
            {% else %}
              <input type="radio" id="star{{i}}" name="rating" value="{{i}}"><label class="full" for="star{{i}}" title=""></label>
            {% endif %}
          {% endfor %}

          <!-- <input type="radio" id="star4" name="rating" value="4"><label class="full" for="star4" title="Pretty good - 4 stars"></label>
          <input type="radio" id="star3" name="rating" value="3"><label class="full" for="star3" title="Meh - 3 stars"></label>
          <input type="radio" id="star2" name="rating" value="2"><label class="full" for="star2" title="Kinda bad - 2 stars"></label>
          <input type="radio" id="star1" name="rating" value="1"><label class="full" for="star1" title="Sucks big time - 1 star"></label> -->
        </fieldset>
      </label>
      <br>
      <div class="row">
        <div class="col-sm-6">
          <label class="recipe-form">
            Difficulty:
            <input type="text" class="form-control" name="difficulty" value="{{note.difficulty}}"></input>
          </label>
        </div>
        <div class="col-sm-6">
          <label class="recipe-form">
            Servings:
            <input type="text" class="form-control" name="servings" value="{{note.servings}}"></input>
          </label>
        </div>
      </div>
      <label class="recipe-form">
        Notes:
        <textarea class="materialize-textarea" name="notes">{{note.text}}</textarea>
      </label>
      <br>
      <label class="recipe-form">
        Tags (one per line):
        <textarea class="materialize-textarea" name="tags">{{note.tags}}</textarea>
      </label>
      <br>
      {% csrf_token %}
      <div class="row">
        <div class="col-xs-10 no-padding">
          <input class="recipe-form btn btn-success" type="submit"></input>
        </div>
        <div class="col-xs-2">
          <a class="recipe-original-link" href="{% url 'note' note.id %}">
            Cancel
          </a>
        </div>
      </div>
    </form>
  {% else %}
    <div class="row">
      <div class="col-xs-2">
        <div
          class="recipe-image"
          style="background-image: url('{{note.recipe.image}}')"
        ></div>
      </div>
      <div class="col-xs-10">
        <div  class="recipe-details">
          Rating:
          {% if note.rating == -1 %}
          -
          {% else %}
            {% for i in note.rating_as_list %}
              <i class="fa fa-star"></i>
            {% endfor %}
          {% endif %}
        </div>
        <div class="recipe-details">
          Difficulty: {% if note.difficulty %} {{note.difficulty}} {% else %} - {% endif %}
        </div>
        <div class="recipe-details">
          Servings: {% if note.servings %} {{note.servings}} {% else %} - {% endif %}
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div>
          <h4> Ingredients </h4>
          {% for ingredient in note.recipe.ingredients_as_list %}
              {{ ingredient }}<br>
          {% endfor %}
        </div>
        <div>
          <h4> Instructions </h4>
          {% for instructions in note.recipe.instructions_as_list %}
              {{ instructions }}<br>
          {% endfor %}
        </div>
      </div>
      <div class="col-md-6 recipe-note">
        <h4> Notes </h4>
        {{note.text}}
      </div>
    </div>
  {% endif %}
<!-- </div> -->
{% endblock %}
